(this.webpackJsonpmwitter=this.webpackJsonpmwitter||[]).push([[0],{47:function(e,t,c){},65:function(e,t,c){"use strict";c.r(t);var n=c(12),a=c.n(n),r=c(50),s=c.n(r),i=c(14),o=c(34),j=c(15),u=c(0),l=c.n(u),b=c(1),d=c(45),O=(c(57),c(22)),f=(c(66),d.a),p=d.a.initializeApp({apiKey:"AIzaSyCG_7xL5bDmSH05TGA_RdQ2JT3eyT2bZ10",authDomain:"mwitter-aacaa.firebaseapp.com",projectId:"mwitter-aacaa",storageBucket:"mwitter-aacaa.appspot.com",messagingSenderId:"933702655646",appId:"1:933702655646:web:8e8ff70b8b647dfd0ce58f",measurementId:"G-7WDVZ49J8Y"}),m=Object(O.f)(),x=d.a.storage(),h=c(28),g=c(37),v=c(9),w=Object(h.c)(p),y=function(e){var t=e.userObj,c=Object(j.f)(),n=function(){var e=Object(b.a)(l.a.mark((function e(){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.e)(Object(O.i)(Object(O.b)(m,"tweet"),Object(O.k)("creatorId","==",t.uid),Object(O.h)("createdAt")));case 2:c=e.sent,console.log(c.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.useEffect)((function(){n()}),[]),Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){w.signOut(),c("/")},children:"Log Out"})})},S=(c(60),c(47),c(25)),N=c(35),k=Object(h.c)(p),I=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),o=s[0],j=s[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),O=d[0],p=d[1],m=Object(n.useState)(""),x=Object(i.a)(m,2),g=x[0],w=x[1],y=function(e){var t=e.target,c=t.name,n=t.value;"email"===c?a(n):"password"===c&&j(n)},I=function(){var e=Object(b.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{n=O?Object(h.b)(k,c,o):Object(h.d)(k,c,o),console.log(n)}catch(g){w(g.message)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(l.a.mark((function e(t){var c,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(c=t.target.name)?((n=new f.auth.GoogleAuthProvider).addScope("profile"),n.addScope("email")):"facebook"===c&&((n=new f.auth.FacebookAuthProvider).addScope("profile"),n.addScope("email")),e.next=4,Object(h.e)(k,n,h.a);case 4:a=e.sent,console.log(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"authContainer",children:[Object(v.jsx)(S.a,{icon:N.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(v.jsxs)("form",{onSubmit:I,className:"container",children:[Object(v.jsx)("input",{name:"email",type:"text",placeholder:"Email",required:!0,value:c,onChange:y,className:"authInput"}),Object(v.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:o,onChange:y,className:"authInput"}),Object(v.jsx)("input",{type:"submit",value:O?"Create Account":"Log In",className:"authInput authSubmit"}),g&&Object(v.jsx)("span",{className:"autherror",children:g})]}),Object(v.jsx)("span",{onClick:function(){return p((function(e){return!e}))},className:"authSwitch",children:O?"Log In":"Create Account"}),Object(v.jsxs)("div",{className:"authBtns",children:[Object(v.jsxs)("button",{name:"google",onClick:C,className:"authBtn",children:["Continue with Google ",Object(v.jsx)(S.a,{icon:N.b})]}),Object(v.jsxs)("button",{name:"facebook",onClick:C,className:"authBtn",children:["Continue with Facebook ",Object(v.jsx)(S.a,{icon:N.a})]})]})]})},C=c(51),F=(c(6),c(30)),A=function(e){var t=e.tweetObj,c=e.isOwner,n=Object(g.useState)(!1),a=Object(i.a)(n,2),r=a[0],s=a[1],o=Object(g.useState)(t.text),j=Object(i.a)(o,2),u=j[0],d=j[1],f=function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc815\ub9d0\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=6;break}return e.next=4,Object(O.c)(Object(O.d)(m,"tweet",t.id));case 4:return e.next=6,x.refFromURL(t.imgUrl).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){s((function(e){return!e}))},h=function(){var e=Object(b.a)(l.a.mark((function e(c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,Object(O.j)(Object(O.d)(m,"tweet",t.id),{text:u});case 3:s(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"nweet",children:!0===r?Object(v.jsx)(v.Fragment,{children:c&&Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{onSubmit:h,className:"container nweetEdit",children:[Object(v.jsx)("input",{type:"text",placeholder:"Edit it!",value:u,required:!0,autoFocus:!0,onChange:function(e){var t=e.target.value;d(t)},className:"formInput"}),Object(v.jsx)("input",{type:"submit",value:"Update Tweet",className:"formBtn"}),Object(v.jsx)("button",{onClick:p,className:"formBtn cancelBtn",children:"Cancel"})]})})}):Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:t.text}),t.imgUrl&&Object(v.jsx)("img",{src:t.imgUrl}),c&&Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"nweet__actions",children:[Object(v.jsx)("span",{onClick:f,children:Object(v.jsx)(S.a,{icon:F.d})}),Object(v.jsx)("span",{onClick:p,children:Object(v.jsx)(S.a,{icon:F.a})})]})})]},t.id)})})},_=c(68),B=function(e){var t=e.userObj,c=Object(n.useState)(""),a=Object(i.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)([]),j=Object(i.a)(o,2),u=j[0],d=j[1],f=Object(n.useState)(""),p=Object(i.a)(f,2),h=p[0],g=p[1];Object(n.useEffect)((function(){Object(O.g)(Object(O.b)(m,"tweet"),(function(e){var t=e.docs.map((function(e){return Object(C.a)({id:e.id},e.data())}));d(t)}))}),[]);var w=function(){var e=Object(b.a)(l.a.mark((function e(c){var n,a,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),n="",""===h){e.next=10;break}return a=x.ref().child("".concat(t.uid,"/").concat(Object(_.a)())),e.next=6,a.putString(h,"data_url");case 6:return i=e.sent,e.next=9,i.ref.getDownloadURL();case 9:n=e.sent;case 10:return o={text:r,createdAt:Date.now(),creatorId:t.uid,imgUrl:n},e.next=13,Object(O.a)(Object(O.b)(m,"tweet"),o);case 13:s(""),g("");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsxs)("form",{onSubmit:w,className:"factoryForm",children:[Object(v.jsxs)("div",{className:"factoryInput__container",children:[Object(v.jsx)("input",{type:"text",value:r,placeholder:"What's on your mind?",maxLength:120,onChange:function(e){var t=e.target.value;s(t)},className:"factoryInput__input"}),Object(v.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]}),Object(v.jsxs)("label",{for:"attach-file",className:"factoryInput__label",children:[Object(v.jsx)("span",{children:"Add photos"}),Object(v.jsx)(S.a,{icon:F.b})]}),Object(v.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],c=new FileReader;c.onloadend=function(e){var t=e.currentTarget.result;g(t)},c.readAsDataURL(t)},style:{opacity:0}}),h&&Object(v.jsxs)("div",{className:"factoryForm__attachment",children:[Object(v.jsx)("img",{src:h,style:{backgoundImage:h}}),Object(v.jsxs)("div",{className:"factoryForm__clear",onClick:function(){return g("")},children:[Object(v.jsx)("span",{children:"Remove"}),Object(v.jsx)(S.a,{icon:F.c})]})]})]}),Object(v.jsx)("div",{style:{marginTop:30},children:u.map((function(e){return Object(v.jsx)(A,{tweetObj:e,isOwner:e.creatorId===t.uid})}))},r.id)]})},D=function(){return Object(v.jsx)("nav",{children:Object(v.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[Object(v.jsx)("li",{children:Object(v.jsx)(o.b,{to:"/",style:{marginRight:30},children:Object(v.jsx)(S.a,{icon:N.c,color:"#04AAFF",size:"2x"})})}),Object(v.jsx)("li",{children:Object(v.jsxs)(o.b,{to:"/profile",style:{marginLeft:30,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[Object(v.jsx)(S.a,{icon:F.e,color:"#04AAFF",size:"2x"}),Object(v.jsx)("span",{style:{marginTop:10},children:"Profile"})]})})]})})},L=function(e){var t=e.isLoggedIn,c=e.userObj;return Object(v.jsxs)(o.a,{children:[t&&Object(v.jsx)(D,{}),t?Object(v.jsx)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:Object(v.jsxs)(j.c,{children:[Object(v.jsx)(j.a,{exact:!0,path:"/",element:Object(v.jsx)(B,{userObj:c})}),Object(v.jsx)(j.a,{exact:!0,path:"/profile",element:Object(v.jsx)(y,{userObj:c})})]})}):Object(v.jsx)(j.c,{children:Object(v.jsx)(j.a,{exact:!0,path:"/",element:Object(v.jsx)(I,{})})})]})};var T=function(){var e=Object(h.c)(p),t=Object(n.useState)(!1),c=Object(i.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(!1),o=Object(i.a)(s,2),j=o[0],u=o[1],l=Object(n.useState)(null),b=Object(i.a)(l,2),d=b[0],O=b[1];return Object(n.useEffect)((function(){e.onAuthStateChanged((function(e){e?(u(!0),O(e)):u(!1),r(!0)}))}),[]),Object(v.jsxs)(v.Fragment,{children:[a?Object(v.jsx)(L,{isLoggedIn:j,userObj:d}):"Initializing...",Object(v.jsxs)("footer",{children:["\xa9 Anorum ",(new Date).getFullYear()]})]})};console.log(p),s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(T,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.830f2e0b.chunk.js.map